{% extends "templates/base.html" %}
{% from "components/radios/_macro.njk" import onsRadios %}
{% from "components/button/_macro.njk" import onsButton %}
{% from "components/panel/_macro.njk" import onsPanel %}
{% from "components/details/_macro.njk" import onsDetails %}
{% from "components/table/_macro.njk" import onsTable %}

{% block main %}
    <div class="ons-page__body">
        {# TODO: pass the variable into gettext for context once we have babel #}
        <h1 class="ons-u-fs-2xl">{{ _("Cookies on") }} {{ ONS_COOKIE_BANNER_SERVICE_NAME | upper }}</h1>

        {# fmt:off #}
        {% call onsPanel({
                "classes": "ons-u-mb-l ons-u-d-no ons-cookies-confirmation-message",
                "variant": "success",
                "iconType": "check",
                "iconSize": "xl"
        }) %}
            <h2>{{ _("Your cookie settings have been saved") }}</h2>
            <p class="ons-u-mb-no">
                {{ _("Some parts of this website may use additional cookies and will have their own cookie policy and banner.") }}
            </p>
            <a class="ons-u-mt-s ons-u-dib ons-js-return-link" href="#0">{{ _("Return to previous page") }}</a>
        {% endcall %}
        {# fmt:on #}

        <p>{{ _("Cookies are files saved on your phone, tablet or computer when you visit a website.") }}</p>
        <p>{{ _("We use cookies to store information about how you use the ONS website, such as the pages you visit.") }}</p>

        <h2>{{ _("Cookie settings") }}</h2>

        <div class="ons-u-db-no-js_enabled">
            <p>
                {{ _("We use JavaScript to set our cookies. Javascript is not running on your browser so you cannot change
                your settings.") }}
            </p>
            <p>{{ _("You can try:") }}</p>
            <ul>
                <li>{{ _("turning on JavaScript in your browser") }}</li>
                <li>{{ _("reloading the page in case there was a temporary fault with JavaScript") }}</li>
            </ul>
        </div>

        <div class="ons-u-db-no-js_disabled">
            <p>
                {{ _("We use four types of cookie. There are three kinds of non-essential cookies that you can choose if
                you’re happy for us to use, there are also strictly necessary cookies that must be turned on.") }}
            </p>

            <form data-module="cookie-settings">
                <h3>{{ _("Cookies that measure website use") }}</h3>
                <p>
                    {{ _("We use Google Analytics and Hotjar to measure how you use the website so we can improve it based on
                    user needs. Google Analytics and Hotjar set cookies that store anonymised information about:") }}
                </p>
                <ul>
                    <li>{{ _("how you got to the site") }}</li>
                    {# TODO replace ons.gov.uk with ONS_COOKIE_BANNER_SERVICE_NAME one we have babel #}
                    <li>{{ _("the pages you visit on ons.gov.uk and how long you spend on each page") }}</li>
                    <li>{{ _("what you click on while you are visiting the site") }}</li>
                    <li>{{ _("the way in which you interact with a page") }}</li>
                    <li>{{ _("whether you have participated in a Hotjar survey") }}</li>
                </ul>

                {% set usage_legend = _("Do you want to allow usage tracking?") %}
                {% set radio_on = _("On") %}
                {% set radio_off = _("Off") %}
                {# fmt:off #}
                <div class="ons-u-mb-s">
                    {{ onsRadios({
                            "id": "cookies-measure-website-use",
                            "name": "cookies-usage",
                            "legend": usage_legend ,
                            "radios": [
                                {
                                    "id": "on-1",
                                    "label": {
                                        "text": radio_on
                                    },
                                    "value": "on"
                                },
                                {
                                    "id": "off-1",
                                    "label": {
                                        "text": radio_off
                                    },
                                    "value": "off"
                                }
                            ]
                        }) }}
                </div>
                {# fmt:on #}
                <p>{{ _("Your preference selection will expire after one year.") }}</p>

                <h3>{{ _("Cookies that help with our communications") }}</h3>
                <p>
                    {{ _("Some of our pages may contain content from other sites, like YouTube and Vimeo. We allow third party
                    sites, like YouTube and Vimeo, to set cookies on our website when you view this content, they will
                    measure how you engage with the content on our website.") }}
                </p>

                {% set campaigns_legend = _("Do you want to allow third party usage tracking?") %}
                {# fmt:off #}
                <div class="ons-u-mb-s">
                    {{ onsRadios({
                            "id": "cookies-measure-website-comms",
                            "name": "cookies-campaigns",
                            "legend": campaigns_legend,
                            "radios": [
                                {
                                    "id": "on-2",
                                    "label": {
                                        "text": radio_on
                                    },
                                    "value": "on"
                                },
                                {
                                    "id": "off-2",
                                    "label": {
                                        "text": radio_off
                                    },
                                    "value": "off"
                                }
                            ]
                        }) }}
                </div>
                {# fmt:on #}

                <p>{{ _("Your preference selection will expire after one year.") }}</p>
                <p>
                    {{ _("In addition, if you share a link to ons.gov.uk page, the service you share it on may set a cookie.
                    We have no control over cookies set on other websites – you can turn them off, but not through us.") }}
                </p>

                <h3>{{ _("Cookies that remember your preference settings to tailor your experience") }}</h3>
                <p>
                    {{ _("These cookies remember the choices you make when using the site to personalise your experience.
                    These cookies do not currently collect any data and but are set in preparation for potential future
                    use.") }}
                </p>

                {% set settings_legend = _("Do you want to allow cookies for potential future use that tailor your experience?") %}
                {# fmt:off #}
                <div class="ons-u-mb-s">
                    {{ onsRadios({
                        "id": "cookies-measure-website-settings",
                        "name": "cookies-settings",
                        "legend": settings_legend,
                        "radios": [
                            {
                                "id": "on-3",
                                "label": {
                                    "text": radio_on
                                },
                                "value": "on"
                            },
                            {
                                "id": "off-3",
                                "label": {
                                    "text": radio_off
                                },
                                "value": "off"
                            }
                        ]
                    }) }}
                </div>
                {# fmt:on #}
                <p>{{ _("Your preference selection will expire after one year.") }}</p>

                <h3>{{ _("Strictly necessary cookies") }}</h3>
                <p>{{ _("These essential cookies do things like:") }}</p>
                <ul>
                    <li>{{ _("remember the notifications you’ve seen so we do not show them to you again") }}</li>
                    <li>{{ _("remember your progress through a form (for example, an ONS study)") }}</li>
                    <li>{{ _("improve performance and identify potential security threats") }}</li>
                </ul>
                <p>{{ _("They are necessary for proper website functionality and always need to be on.") }}</p>
                <p>
                    <a href={{ "https://cy.ons.gov.uk/help/cookies" if LANGUAGE_CODE == 'cy' else "https://www.ons.gov.uk/help/cookies" }}
                       target="_blank" rel="noopener">
                        {# TODO: pass the variable into gettext for context once we have babel #}
                        {{ _("Find out more about cookies on") }} {{ ONS_COOKIE_BANNER_SERVICE_NAME }}
                    </a>
                </p>

                {% set save_changes_button = _('Save changes') %}
                {# fmt:off #}
                {{ onsButton({
                        "type": 'submit',
                        "text": save_changes_button
                    }) }}
                {# fmt:on #}

            </form>
        </div>
    </div>
{% endblock %}
