{% macro onsChart(params) %}
    <div
        data-highcharts-base-chart
        data-highcharts-type="{{ params.chartType }}"
        data-highcharts-theme="{{ params.theme }}"
        data-highcharts-title="{{ params.title }}"
        data-highcharts-uuid="{{ params.uuid }}"
        {% if params.use_stacked_layout %}data-highcharts-use-stacked-layout{% endif %}
    >
        <figure>
            {# Heading levels will need to be configurable depending on page surroundings #}
            <h3>{{ params.title }}</h3>
            <h4>{{ params.subtitle }}</h4>
            <div data-highcharts-chart></div>
            {% if params.caption %}
                <figcaption>{{ params.caption }}</figcaption>
            {% endif %}
        </figure>

        {% if params.download_title and (params.download_image or params.download_csv or params.download_excel) %}
            {% if params.download_title %}<h4>{{ params.download_title }}</h4>{% endif %}
            <ol>
                {% if params.download_excel %}
                    <li><a href="{{ params.download_excel }}">Excel spreadsheet (XLSX format{% if params.download_excel_size %}, {{ params.download_excel_size }}{% endif %})</a></li>
                {% endif %}
                {% if params.download_csv %}
                    <li><a href="{{ params.download_csv }}">Simple text file (CSV format{% if params.download_csv_size %}, {{ params.download_csv_size }}{% endif %})</a></li>
                {% endif %}
                {% if params.download_image %}
                    <li><a href="{{ params.download_image }}">Image (PNG format{% if params.download_image_size %}, {{ params.download_image_size }}{% endif %})</a></li>
                {% endif %}
            </ol>
        {% endif %}

        {# script tags to pass json data to the javascript component #}
        <script type="application/json" data-highcharts-config="{{ params.uuid }}">
            {# Note that in the design system this will need to be a custom filter #}
            {{ params.config|tojson }}
        </script>
        {% if params.annotations_values %}
            <script type="application/json" data-highcharts-annotations-values="{{ params.uuid }}">
                {# Note that in the design system will may need to be a custom filter #}
                {{ params.annotations_values|tojson }}
            </script>
        {% endif %}
    </div>
{% endmacro %}
